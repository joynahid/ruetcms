<script>

        let loading = `
            Please wait...
    `

    $('#upcoming-contests').append(loading).fadeIn('slow')

    let DATA = []
    RETRIEVE_URL = "{{ url_for('upcomingContest') }}";

    let notok = true;

    $.getJSON(RETRIEVE_URL, function (dat, status) {

        console.log(status)

        $('#upcoming-contests').html("");
        DATA = dat;
        let it = 1;
        $.each(dat, function (key, val) {
            notok = false;
            let title = '<a href="' + val['href'] + '" data-toggle="tooltip" data-placement="top" title="Topcoder"><h5>' + val['name'] + '</h5></a>';
            let starts_in = '<p> Starts in <span id="count-down">' + val['start'] + ' </span></p>';

            $('#upcoming-contests').append('<div id="' + it.toString() + '">' + title + starts_in + '<span style="font-size:12px" onclick="createPost(this)" id="create-post" style="cursor: pointer">Create Post</span></div><hr>');
            it++;
        });

        if (notok) {
            $('#upcoming-contests').html("No upcoming contest");
        }
    });

    function createPost(el) {
        let textAreaLoc = $(el).parent();
        let id = textAreaLoc.attr('id');

        let textAreaContent = `
<textarea class="form-control" rows="6">
${DATA[id - 1]['name']}

Starts: ${DATA[id - 1]['date']}
Duration: ${DATA[id - 1]['duration']}

${DATA[id - 1]['href']}
</textarea>
            `;

        textAreaLoc.html(textAreaContent.toString());
    }

</script>